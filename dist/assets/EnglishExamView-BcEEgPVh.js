import{d as R,u as z,r as D,h as k,c,i as t,F as _,j as v,o as g,n as x,t as d,k as q}from"./vue-BygjnGSS.js";import{u as E}from"./question-BhbVhhj-.js";import{questionData as M}from"./questionData-BvVf9wI5.js";import{_ as H}from"./index-DzBPubWr.js";import"./lodash-CqkleIqs.js";const L=R({__name:"EnglishExamView",setup(C,{expose:i}){i();const a=E(),s=z(),u=D({});k(()=>{console.log("组件挂载，开始初始化数据"),a.initQuestionData(M),console.log("题库数据加载完成，章节数量:",a.chapters.length),a.chapters.length>0?a.chapters.forEach(e=>{console.log("初始化章节展开状态:",e.id),u[e.id]=!0}):console.warn("没有找到章节数据")});function p(e,n){a.setCurrentChapter(e),a.setCurrentQuestionSet(n),s.push(`/exam?chapterId=${e}&questionSetId=${n}`)}function o(e){const n=a.chapterProgress[e];return n?n.totalCorrectRate*100:0}function r(e,n){var m;const l=(m=a.chapterProgress[e])==null?void 0:m.questionSetProgress[n];return!l||l.completedQuestions===0?0:l.correctAnswers/l.completedQuestions*100}function f(e,n){var l,m;return(m=(l=a.chapterProgress[e])==null?void 0:l.questionSetProgress[n])==null?void 0:m.lastAttemptDate}function y(e){return e.toFixed(1)}function w(e){return e===0?"text-gray-500":e<60?"text-red-500":e<80?"text-yellow-500":"text-green-500"}function b(e){const n=new Date(e);return`${n.getMonth()+1}/${n.getDate()} ${n.getHours()}:${n.getMinutes().toString().padStart(2,"0")}`}function S(e,n){n.stopPropagation();const l=u[e];console.log("当前章节状态:",e,l),u[e]=!l,console.log("章节状态已切换为:",e,u[e]),setTimeout(()=>{console.log("DOM更新后章节状态:",e,u[e])},0)}const h={questionStore:a,router:s,expandedChapters:u,startQuestionSet:p,getChapterCorrectRate:o,getSetCorrectRate:r,getLastAttemptDate:f,formatCorrectRate:y,getCorrectRateClass:w,formatDate:b,toggleChapter:S};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}}),P={class:"english-exam-container p-4"},Q={class:"chapters-container"},j={class:"chapter-header flex justify-between items-center mb-4"},B={class:"flex items-center"},V=["onClick"],A={class:"text-2xl font-semibold text-gray-800"},F={class:"chapter-stats px-3 py-1 rounded-full bg-gray-100 text-sm"},T={class:"text-gray-600 mb-6"},N={class:"question-sets grid grid-cols-1 md:grid-cols-2 gap-6"},O=["onClick"],Y={class:"flex justify-between items-center mb-3"},G={class:"text-lg font-medium text-gray-800"},J={class:"text-gray-600 text-sm mb-3"},K={class:"flex items-center justify-between mt-4 pt-3 border-t border-gray-100"},U={class:"flex items-center"},W={class:"text-sm text-gray-600"},X={class:"mt-2 text-xs text-gray-500 flex items-center"},Z={key:0},I={key:1};function $(C,i,a,s,u,p){return g(),c("div",P,[i[5]||(i[5]=t("div",{class:"text-center mb-8"},[t("h1",{class:"text-3xl font-bold text-indigo-600 mb-2"},"英语刷题系统"),t("p",{class:"text-gray-600"},"选择章节和题集开始练习，提高你的英语能力")],-1)),t("div",Q,[(g(!0),c(_,null,v(s.questionStore.chapters,o=>(g(),c("div",{key:o.id,class:"chapter-card mb-8 bg-white rounded-lg shadow-lg p-6 border-t-4 border-indigo-500"},[t("div",j,[t("div",B,[t("button",{onClick:r=>s.toggleChapter(o.id,r),class:"mr-2 w-6 h-6 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center focus:outline-none hover:bg-indigo-200 transition-colors"},[(g(),c("svg",{xmlns:"http://www.w3.org/2000/svg",class:x(["h-4 w-4 transition-transform duration-300",{"transform rotate-180":!s.expandedChapters[o.id]}]),viewBox:"0 0 20 20",fill:"currentColor"},[...i[0]||(i[0]=[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)])],2))],8,V),t("h2",A,d(o.title),1)]),t("div",F,[i[1]||(i[1]=t("span",{class:"text-gray-600"},"总正确率: ",-1)),t("span",{class:x([s.getCorrectRateClass(s.getChapterCorrectRate(o.id)),"font-medium"])},d(s.formatCorrectRate(s.getChapterCorrectRate(o.id)))+"% ",3)])]),t("p",T,d(o.description),1),t("div",{class:"question-sets-container",style:q({maxHeight:s.expandedChapters[o.id]?"2000px":"0",opacity:s.expandedChapters[o.id]?1:0,transform:s.expandedChapters[o.id]?"translateY(0)":"translateY(-10px)",overflow:"hidden",transition:"all 0.5s ease"})},[t("div",N,[(g(!0),c(_,null,v(o.questionSets,r=>(g(),c("div",{key:r.id,class:"question-set-card bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md cursor-pointer transition-all duration-300 hover:border-indigo-300 hover:translate-y-[-2px]",onClick:f=>s.startQuestionSet(o.id,r.id)},[t("div",Y,[t("h3",G,d(r.title),1),t("div",{class:x(["question-set-type px-3 py-1 text-xs font-medium rounded-full",{"bg-blue-100 text-blue-800":r.type==="reading","bg-green-100 text-green-800":r.type==="cloze","bg-purple-100 text-purple-800":r.type==="translation"}])},d(r.type==="reading"?"阅读理解":r.type==="cloze"?"完形填空":"英译汉"),3)]),t("p",J,d(r.description),1),t("div",K,[t("div",U,[i[2]||(i[2]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-gray-500 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),t("path",{"fill-rule":"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z","clip-rule":"evenodd"})],-1)),t("span",W,d(r.questions.length)+" 题",1)]),t("div",null,[i[3]||(i[3]=t("span",{class:"text-gray-600 text-sm"},"正确率: ",-1)),t("span",{class:x([s.getCorrectRateClass(s.getSetCorrectRate(o.id,r.id)),"font-medium text-sm"])},d(s.formatCorrectRate(s.getSetCorrectRate(o.id,r.id)))+"% ",3)])]),t("div",X,[i[4]||(i[4]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule":"evenodd"})],-1)),s.getLastAttemptDate(o.id,r.id)?(g(),c("span",Z," 上次练习: "+d(s.formatDate(s.getLastAttemptDate(o.id,r.id))),1)):(g(),c("span",I,"尚未练习"))])],8,O))),128))])],4)]))),128))])])}const nt=H(L,[["render",$],["__scopeId","data-v-7509f752"],["__file","D:/ENGLISH_exam/vue3-Ts-Tailwind-template/src/views/EnglishExamView.vue"]]);export{nt as default};
